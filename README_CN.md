# QueryBot

ğŸš€ åŸºäºLangGraphæ„å»ºçš„æ™ºèƒ½æŸ¥è¯¢æœºå™¨äººï¼Œå…·å¤‡è‡ªç„¶è¯­è¨€è½¬SQLã€é«˜çº§å‘é‡æœç´¢å’Œå¤šæ•°æ®åº“æ”¯æŒèƒ½åŠ›ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ§  æ™ºèƒ½æŸ¥è¯¢å¤„ç†
- **è‡ªç„¶è¯­è¨€ç†è§£**ï¼šå°†å¤æ‚çš„è‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬æ¢ä¸ºç²¾ç¡®çš„SQLè¯­å¥
- **æ„å›¾åˆ†æ**ï¼šæ™ºèƒ½åˆ¤æ–­æŸ¥è¯¢æ„å›¾çš„æ¸…æ™°åº¦ï¼Œä¸»åŠ¨æ¾„æ¸…æ¨¡ç³Šçš„éœ€æ±‚
- **æœ¯è¯­æ ‡å‡†åŒ–**ï¼šè‡ªåŠ¨æ˜ å°„ä¸šåŠ¡åˆ«ååˆ°æ ‡å‡†æ•°æ®åº“å­—æ®µ
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šåŸºäºå¯¹è¯å†å²å’Œä¸šåŠ¡ä¸Šä¸‹æ–‡ç†è§£æŸ¥è¯¢æ„å›¾

### ğŸ”„ æ™ºèƒ½å·¥ä½œæµå¼•æ“
- **å›¾çŠ¶æ€æœºæ¶æ„**ï¼šåŸºäºLangGraphæ„å»ºçš„13ä¸ªä¸“ä¸šåŒ–å¤„ç†èŠ‚ç‚¹
- **åŠ¨æ€è·¯ç”±**ï¼šæ ¹æ®å¤„ç†ç»“æœæ™ºèƒ½å†³å®šä¸‹ä¸€æ­¥æ“ä½œ
- **é”™è¯¯æ¢å¤**ï¼šè‡ªåŠ¨SQLé”™è¯¯æ£€æµ‹å’Œä¿®å¤æœºåˆ¶
- **è¿‡ç¨‹å¯è§†åŒ–**ï¼šå®Œæ•´çš„å¤„ç†æµç¨‹è·Ÿè¸ªå’Œç›‘æ§

### ğŸ›¡ï¸ æ•°æ®å®‰å…¨
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šå‚æ•°åŒ–æŸ¥è¯¢å’Œè¾“å…¥éªŒè¯
- **æ•°æ®è®¿é—®æ§åˆ¶**ï¼šåŸºäºç¯å¢ƒé…ç½®çš„æ•°æ®åº“è®¿é—®æƒé™
- **å®¡è®¡æ—¥å¿—**ï¼šå®Œæ•´çš„æŸ¥è¯¢å†å²å’Œæ“ä½œè®°å½•

### ğŸ” å‘é‡è¯­ä¹‰æœç´¢
- **è¡¨ç»“æ„ç†è§£**ï¼šè¡¨æè¿°å’Œç»“æ„ä¿¡æ¯çš„å‘é‡åŒ–å­˜å‚¨
- **æŸ¥è¯¢ç¤ºä¾‹åŒ¹é…**ï¼šåŸºäºç›¸ä¼¼æŸ¥è¯¢çš„æ™ºèƒ½SQLç”Ÿæˆ
- **æœ¯è¯­è¯­ä¹‰æœç´¢**ï¼šæ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œæœ¯è¯­æŸ¥æ‰¾çš„è¯­ä¹‰ç†è§£

### ğŸ—ï¸ å¯æ‰©å±•æ¶æ„
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªå¤„ç†èŠ‚ç‚¹èŒè´£å•ä¸€ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **æœ¬åœ°å¼€å‘å‹å¥½**ï¼šä¸ºæ¼”ç¤ºå’Œå¼€å‘ç¯å¢ƒæä¾›ç®€åŒ–é…ç½®
- **å¤šæ•°æ®åº“æ”¯æŒ**ï¼šMySQL/PostgreSQLä¸»æ•°æ®åº“ + Milvuså‘é‡æ•°æ®åº“çš„æ··åˆæ¶æ„
- **ç›‘æ§ä¸è¿½è¸ª**ï¼šé›†æˆLangfuseå’ŒPhoenixçš„å…¨é“¾è·¯ç›‘æ§

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒå¤„ç†æµç¨‹

```mermaid
graph TD
    A([è‡ªç„¶è¯­è¨€æŸ¥è¯¢]) --> B[æ„å›¾åˆ†æ]
    B --> C{æ„å›¾æ¸…æ™°?}
    C -->|å¦| D[æ¾„æ¸…é—®é¢˜]
    C -->|æ˜¯| E[å…³é”®è¯æå–]
    E --> F[æœ¯è¯­æ˜ å°„]
    F --> G[æŸ¥è¯¢é‡å†™]
    G --> H[æ•°æ®æºè¯†åˆ«]
    H --> I[è¡¨ç»“æ„åˆ†æ]
    I --> J[å¯è¡Œæ€§æ£€æŸ¥]
    J --> K[æŸ¥è¯¢ç¤ºä¾‹æ£€ç´¢]
    K --> L[SQLç”Ÿæˆ]
    L --> M[æƒé™æ§åˆ¶]
    M --> N[SQLæ‰§è¡Œ]
    N --> O{æ‰§è¡ŒæˆåŠŸ?}
    O -->|å¦| P[é”™è¯¯åˆ†æ]
    O -->|æ˜¯| Q[ç»“æœç”Ÿæˆ]
    P --> R{å¯ä¿®å¤?}
    R -->|æ˜¯| N
    R -->|å¦| S[è¿”å›é”™è¯¯]
    Q --> T([è¿”å›ç»“æœ])
    
    %% ä¸åŒèŠ‚ç‚¹ç±»å‹çš„å¢å¼ºæ ·å¼
    classDef inputOutput fill:#e3f2fd,stroke:#1565c0,stroke-width:3px,color:#000,font-weight:bold
    classDef nlpProcessing fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000
    classDef dataProcessing fill:#e8f5e8,stroke:#388e3c,stroke-width:2px,color:#000
    classDef sqlProcessing fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    classDef securityControl fill:#e0f2f1,stroke:#00695c,stroke-width:3px,color:#000,font-weight:bold
    classDef decision fill:#fff8e1,stroke:#f57c00,stroke-width:2px,color:#000,font-style:italic
    classDef errorHandling fill:#fce4ec,stroke:#ad1457,stroke-width:2px,color:#000
    classDef resultOutput fill:#e0f7fa,stroke:#00838f,stroke-width:2px,color:#000
    
    %% ä¸ºèŠ‚ç‚¹åº”ç”¨å¢å¼ºæ ·å¼
    class A,T inputOutput
    class B,E,F,G nlpProcessing
    class H,I,J,K dataProcessing
    class L,N sqlProcessing
    class M securityControl
    class C,O,R decision
    class D,P,S errorHandling
    class Q resultOutput
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|------|------|------|
| **APIå±‚** | FastAPI + uvicorn | å¼‚æ­¥HTTPæ¥å£æœåŠ¡ |
| **å·¥ä½œæµå¼•æ“** | LangGraph | æ™ºèƒ½çŠ¶æ€æœºå’Œè¿‡ç¨‹æ§åˆ¶ |
| **AIæ¡†æ¶** | LangChain | LLMè°ƒç”¨å’Œå·¥å…·é“¾ç®¡ç† |
| **å‘é‡æ•°æ®åº“** | Milvus | è¯­ä¹‰æœç´¢å’Œå‘é‡å­˜å‚¨ |
| **å…³ç³»æ•°æ®åº“** | MySQL/PostgreSQL | ä¸šåŠ¡æ•°æ®å’Œæƒé™ç®¡ç† |
| **ç›‘æ§ä¸è¿½è¸ª** | Langfuse/Phoenix | LLMè°ƒç”¨é“¾è¿½è¸ªå’Œåˆ†æ |

## ğŸ“ é¡¹ç›®ç»“æ„

```
QueryBot/
â”œâ”€â”€ ğŸ“ backend/                     # ğŸ”§ åç«¯æœåŠ¡
â”‚   â””â”€â”€ sql_assistant/
â”‚       â”œâ”€â”€ api.py                  # FastAPIåº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ async_executor.py       # å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå™¨
â”‚       â”œâ”€â”€ graph/                  # å·¥ä½œæµå›¾å®šä¹‰
â”‚       â”œâ”€â”€ nodes/                  # 13ä¸ªå¤„ç†èŠ‚ç‚¹
â”‚       â”œâ”€â”€ routes/                 # æ¡ä»¶è·¯ç”±é€»è¾‘
â”‚       â”œâ”€â”€ states/                 # çŠ¶æ€æ•°æ®ç»“æ„
â”‚       â””â”€â”€ utils/                  # å®ç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ data/                        # ğŸ’¾ æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ demo_data_csv/              # æ¼”ç¤ºæ•°æ®
â”‚   â”œâ”€â”€ vector_db_csv/              # å‘é‡æ•°æ®åº“å…ƒæ•°æ®
â”‚   â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ temp/                       # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ ğŸ“ tools/                       # ğŸ› ï¸ å·¥å…·å¥—ä»¶
â”‚   â”œâ”€â”€ setup_demo_environment.py   # æ™ºèƒ½ç¯å¢ƒè®¾ç½®å‘å¯¼
â”‚   â”œâ”€â”€ data_generation/            # æ•°æ®ç”Ÿæˆå·¥å…·
â”‚   â”œâ”€â”€ mysql_import/               # MySQLå¯¼å…¥å·¥å…·
â”‚   â””â”€â”€ vector_db_import/           # å‘é‡æ•°æ®åº“å¯¼å…¥å·¥å…·
â”œâ”€â”€ ğŸ“ frontend/                    # ğŸ¨ å‰ç«¯ç•Œé¢
â”œâ”€â”€ ğŸ“ tools/admin/                # ğŸ”§ ç®¡ç†å·¥å…·ï¼ˆå‘é‡æ•°æ®åº“ç®¡ç†ï¼‰
â”œâ”€â”€ ğŸ“ utils/                       # ğŸ”§ é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ core/                     # åŸºç¡€è®¾æ–½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.py             # ç»Ÿä¸€é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ constants.py          # å…¨å±€å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ error_handler.py      # é”™è¯¯å¤„ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ logging_config.py     # æ—¥å¿—é…ç½®å·¥å…·
â”‚   â”œâ”€â”€ factories/                # è¿æ¥å·¥å‚æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ database.py           # æ•°æ®åº“è¿æ¥å·¥å‚
â”‚   â”‚   â”œâ”€â”€ embedding.py          # åµŒå…¥æ¨¡å‹å·¥å‚
â”‚   â”‚   â””â”€â”€ milvus.py             # Milvusè¿æ¥å·¥å‚
â”‚   â””â”€â”€ services/                 # ä¸šåŠ¡æœåŠ¡æ¨¡å—
â”‚       â”œâ”€â”€ llm.py                # LLMæœåŠ¡å°è£…
â”‚       â””â”€â”€ milvus_service.py     # Milvusé«˜çº§æœåŠ¡
â”œâ”€â”€ ğŸ“‹ pyproject.toml               # Pythoné¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ ğŸ”’ uv.lock                      # ä¾èµ–é”å®šæ–‡ä»¶ï¼Œç¡®ä¿å¯é‡ç°æ„å»º
â””â”€â”€ ğŸš€ start_local.sh               # QueryBotæœ¬åœ°å¼€å‘å¯åŠ¨è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- **Python**ï¼š3.12+
- **uv**ï¼šå¿«é€ŸPythonåŒ…ç®¡ç†å™¨
- **æ•°æ®åº“**ï¼šMySQL 8.0+ æˆ– PostgreSQL 12+
- **å‘é‡æ•°æ®åº“**ï¼šMilvus 2.4+ æˆ– Zilliz Cloud
- **å†…å­˜**ï¼š4GB+
- **å­˜å‚¨**ï¼š5GB+

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/i-richardwang/QueryBot.git
cd QueryBot
```

### 2. å®‰è£…uv

```bash
# åœ¨ macOS/Linux ä¸Šå®‰è£… uv
curl -LsSf https://astral.sh/uv/install.sh | sh

# æˆ–é€šè¿‡pipå®‰è£…
pip install uv

# åœ¨Windowsä¸Šä½¿ç”¨PowerShell
powershell -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### 3. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å†™æ‚¨çš„APIå¯†é’¥å’Œæ•°æ®åº“ä¿¡æ¯
vim .env
```

#### æ•°æ®åº“é…ç½®é€‰é¡¹

**é€‰é¡¹1ï¼šå®Œæ•´æ•°æ®åº“URLï¼ˆæ¨èç”¨äºäº‘æ•°æ®åº“ï¼‰**
```bash
# Neon PostgreSQL
SQLBOT_DB_URL=postgresql://user:password@host.neon.tech/database?sslmode=require

# Supabase PostgreSQL
SQLBOT_DB_URL=postgresql://postgres:password@db.project.supabase.co:5432/postgres

# PlanetScale MySQL
SQLBOT_DB_URL=mysql://user:password@host.planetscale.com:3306/database?sslmode=require
```

**é€‰é¡¹2ï¼šç‹¬ç«‹å‚æ•°ï¼ˆé€‚ç”¨äºæœ¬åœ°æ•°æ®åº“ï¼‰**
```bash
SQLBOT_DB_TYPE=postgresql
SQLBOT_DB_HOST=localhost
SQLBOT_DB_PORT=5432
SQLBOT_DB_USER=postgres
SQLBOT_DB_PASSWORD=your_password
SQLBOT_DB_NAME=sql_assistant
```

#### å‘é‡æ•°æ®åº“é…ç½®é€‰é¡¹

**é€‰é¡¹1ï¼šZilliz Cloudï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰**
```bash
# åªéœ€è¦URIå’Œä»¤ç‰Œï¼Œæ›´åŠ ç®€å•ï¼
VECTOR_DB_URI=https://your-cluster-endpoint.zillizcloud.com:443
VECTOR_DB_TOKEN=your_zilliz_cloud_token
VECTOR_DB_DATABASE=default
```

**é€‰é¡¹2ï¼šæœ¬åœ°Milvusï¼ˆé€‚ç”¨äºå¼€å‘ç¯å¢ƒï¼‰**
```bash
VECTOR_DB_HOST=localhost
VECTOR_DB_PORT=19530
VECTOR_DB_DATABASE=default
```

### 4. å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨uvå®‰è£…ä¾èµ–
uv sync
```

**æ ¸å¿ƒä¾èµ–åŒ…ï¼š**
- **AIæ¡†æ¶**ï¼šLangChain, LangGraph, Langfuse
- **WebæœåŠ¡**ï¼šFastAPI, Uvicorn, Streamlit
- **æ•°æ®åº“**ï¼šMySQL, Milvus, SQLAlchemy
- **æ•°æ®å¤„ç†**ï¼šPandas, Pydantic
- **å·¥å…·åº“**ï¼šRequests, Python-dotenv, PyYAML

### 5. å¯åŠ¨QueryBotæœåŠ¡

#### é€‰é¡¹1ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# ä½¿ç”¨äº¤äº’å¼å¯åŠ¨è„šæœ¬
./start_local.sh
```

#### é€‰é¡¹2ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# å¯åŠ¨QueryBot APIæœåŠ¡
uv run uvicorn backend.sql_assistant.api:app --host 0.0.0.0 --port 8000 --reload
```

### 6. åˆå§‹åŒ–æ¼”ç¤ºæ•°æ®

```bash
# ä½¿ç”¨æ™ºèƒ½è®¾ç½®å‘å¯¼ï¼ˆæ¨èï¼‰
uv run python tools/setup_demo_environment.py

# æˆ–ä¸€é”®æ‰¹é‡è®¾ç½®
uv run python tools/setup_demo_environment.py --batch
```

### 7. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
# å¯åŠ¨QueryBotå‰ç«¯
cd frontend
uv run streamlit run app.py

# æˆ–å¯åŠ¨ç®¡ç†å·¥å…·ï¼ˆä»…ä¾›å¼€å‘è€…ä½¿ç”¨ï¼‰
cd tools/admin
uv run streamlit run admin_app.py
```

### 8. éªŒè¯å®‰è£…

```bash
# æ£€æŸ¥é…ç½®
uv run python tools/config_validator.py

# å¯åŠ¨æœåŠ¡
./start_local.sh
```

è®¿é—®ä»¥ä¸‹ç«¯ç‚¹è¿›è¡ŒéªŒè¯ï¼š
- **QueryBotå‰ç«¯**ï¼šhttp://localhost:8501
- **APIæœåŠ¡**ï¼šhttp://localhost:8000/health
- **ç®¡ç†å·¥å…·**ï¼šhttp://localhost:8502

## ğŸ’» ä½¿ç”¨ç¤ºä¾‹

### APIè°ƒç”¨ç¤ºä¾‹

```python
import requests

# å‘é€æŸ¥è¯¢è¯·æ±‚
response = requests.post(
    "http://localhost:8000/api/query-bot",
    json={
        "text": "æŸ¥è¯¢æŠ€æœ¯ç ”å‘éƒ¨æœ€æ–°æ˜¥å­£æ‹›è˜çš„æ‰€æœ‰å€™é€‰äººä¿¡æ¯",
        "username": "demo_user",
        "session_id": "demo_session_001"
    }
)

result = response.json()
print(result["text"])
```

### æ”¯æŒçš„æŸ¥è¯¢ç±»å‹

```sql
-- åŸºç¡€æŸ¥è¯¢
"æŸ¥è¯¢æ‰€æœ‰Javaå¼€å‘å·¥ç¨‹å¸ˆå€™é€‰äºº"

-- èšåˆç»Ÿè®¡
"ç»Ÿè®¡å„éƒ¨é—¨æ‹›è˜æˆåŠŸç‡"

-- æ—¶é—´ç­›é€‰
"æŸ¥è¯¢æœ€è¿‘ä¸‰ä¸ªæœˆçš„æ‹›è˜æ´»åŠ¨"

-- å¤æ‚æ¡ä»¶
"æŸ¥è¯¢P7+çº§åˆ«ä¸”ç»éªŒè¶…è¿‡5å¹´çš„å€™é€‰äºº"

-- å…³è”æŸ¥è¯¢
"æŸ¥è¯¢å¼ ä¼Ÿæ‹…ä»»é¢è¯•å®˜çš„æ‰€æœ‰æ‹›è˜æ´»åŠ¨å’Œå€™é€‰äºº"
```

## ğŸ“Š æ™ºèƒ½å¤„ç†èŠ‚ç‚¹

QueryBotåŒ…å«13ä¸ªä¸“ä¸šåŒ–å¤„ç†èŠ‚ç‚¹ï¼š

| èŠ‚ç‚¹ | åŠŸèƒ½ | è¾“å…¥ | è¾“å‡º |
|------|------|------|------|
| **æ„å›¾åˆ†æ** | åˆ¤æ–­æŸ¥è¯¢æ„å›¾æ¸…æ™°åº¦ | ç”¨æˆ·æŸ¥è¯¢ | æ„å›¾æ¸…æ™°åº¦ |
| **å…³é”®è¯æå–** | æå–æŸ¥è¯¢å…³é”®ä¿¡æ¯ | æ ‡å‡†åŒ–æŸ¥è¯¢ | å…³é”®è¯åˆ—è¡¨ |
| **æœ¯è¯­æ˜ å°„** | æ ‡å‡†åŒ–ä¸šåŠ¡æœ¯è¯­ | å…³é”®è¯ | æ ‡å‡†æœ¯è¯­ |
| **æŸ¥è¯¢é‡å†™** | è§„èŒƒåŒ–æŸ¥è¯¢è¡¨è¾¾ | æ˜ å°„ç»“æœ | é‡å†™æŸ¥è¯¢ |
| **æ•°æ®æºè¯†åˆ«** | è¯†åˆ«ç›¸å…³æ•°æ®è¡¨ | é‡å†™æŸ¥è¯¢ | åŒ¹é…è¡¨åˆ—è¡¨ |
| **è¡¨ç»“æ„åˆ†æ** | è·å–è¯¦ç»†è¡¨ä¿¡æ¯ | è¡¨åˆ—è¡¨ | è¡¨ç»“æ„ä¿¡æ¯ |
| **å¯è¡Œæ€§æ£€æŸ¥** | éªŒè¯æŸ¥è¯¢å¯è¡Œæ€§ | æŸ¥è¯¢+ç»“æ„ | å¯è¡Œæ€§ç»“æœ |
| **æŸ¥è¯¢ç¤ºä¾‹æ£€ç´¢** | æŸ¥æ‰¾ç›¸ä¼¼æŸ¥è¯¢ | æŸ¥è¯¢æ„å›¾ | ç¤ºä¾‹SQL |
| **SQLç”Ÿæˆ** | ç”ŸæˆSQLè¯­å¥ | æ‰€æœ‰ä¸Šä¸‹æ–‡ | SQLæŸ¥è¯¢ |
| **æƒé™æ§åˆ¶** | æ³¨å…¥æƒé™æ¡ä»¶ | SQL+ç”¨æˆ· | å®‰å…¨SQL |
| **SQLæ‰§è¡Œ** | æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ | å®‰å…¨SQL | æ‰§è¡Œç»“æœ |
| **é”™è¯¯åˆ†æ** | åˆ†æå’Œä¿®å¤é”™è¯¯ | é”™è¯¯ä¿¡æ¯ | ä¿®å¤æ–¹æ¡ˆ |
| **ç»“æœç”Ÿæˆ** | æ ¼å¼åŒ–æœ€ç»ˆç»“æœ | æ‰§è¡Œç»“æœ | ç”¨æˆ·å“åº” |

## ğŸ”§ é…ç½®æŒ‡å—

### ç¯å¢ƒå˜é‡é…ç½®

| ç±»åˆ« | å˜é‡å | æè¿° | ç¤ºä¾‹ |
|------|--------|------|------|
| **åŸºç¡€** | `BASE_HOST` | æœåŠ¡ä¸»æœºåœ°å€ | `localhost` |
| **æ•°æ®åº“** | `SQLBOT_DB_TYPE` | æ•°æ®åº“ç±»å‹ | `mysql` æˆ– `postgresql` |
| **æ•°æ®åº“** | `SQLBOT_DB_*` | æ•°æ®åº“è¿æ¥ä¿¡æ¯ | `localhost:3306` (MySQL) æˆ– `localhost:5432` (PostgreSQL) |
| **å‘é‡æ•°æ®åº“** | `VECTOR_DB_*` | Milvusè¿æ¥ä¿¡æ¯ | `localhost:19530` |
| **LLM** | `LLM_MODEL` | LLMæ¨¡å‹åç§° | `Qwen/Qwen2.5-72B-Instruct` |
| **LLM** | `LLM_API_KEY` | LLM APIå¯†é’¥ | `sk-your_api_key` |
| **LLM** | `LLM_API_BASE` | LLM APIåŸºç¡€URL | `https://api.siliconflow.cn/v1` |
| **åµŒå…¥æ¨¡å‹** | `EMBEDDING_API_*` | å‘é‡åŒ–æœåŠ¡é…ç½® | APIå¯†é’¥å’Œç«¯ç‚¹ |
| **ç›‘æ§** | `LANGFUSE_ENABLED` | å¯ç”¨è¿½è¸ª | `true/false` |

### æƒé™é…ç½®

ç³»ç»Ÿæä¾›çµæ´»çš„æƒé™ç®¡ç†å’Œç®€åŒ–é…ç½®ï¼š

#### æ¼”ç¤ºæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
```bash
# ç”¨äºæ¼”ç¤ºå’Œå¼€å‘çš„ç®€åŒ–æƒé™æ§åˆ¶
USER_AUTH_ENABLED=false
```

å¯¹äºé«˜çº§ç”¨ä¾‹ï¼Œé€šè¿‡è®¾ç½®`USER_AUTH_ENABLED=true`å¯ç”¨åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ã€‚

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å¤„ç†èŠ‚ç‚¹

1. **åˆ›å»ºèŠ‚ç‚¹æ–‡ä»¶**
```python
# backend/sql_assistant/nodes/new_node.py
def new_processing_node(state: SQLAssistantState) -> dict:
    """æ–°çš„å¤„ç†èŠ‚ç‚¹"""
    # å®ç°å¤„ç†é€»è¾‘
    return {"new_field": result}
```

2. **åœ¨å›¾ä¸­æ³¨å†Œ**
```python
# backend/sql_assistant/graph/assistant_graph.py
graph_builder.add_node("new_processing", new_processing_node)
graph_builder.add_edge("previous_node", "new_processing")
```

3. **æ›´æ–°çŠ¶æ€å®šä¹‰**
```python
# backend/sql_assistant/states/assistant_state.py
class SQLAssistantState(TypedDict):
    # ... ç°æœ‰å­—æ®µ
    new_field: Optional[Any]
```

### è‡ªå®šä¹‰æ•°æ®ç”Ÿæˆå™¨

```python
# tools/data_generation/custom_generator.py
from tools.data_generation import RecruitmentDataGenerator

class CustomDataGenerator(RecruitmentDataGenerator):
    def generate_custom_data(self, count: int):
        # å®ç°è‡ªå®šä¹‰æ•°æ®ç”Ÿæˆé€»è¾‘
        pass
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Streamlit Cloudéƒ¨ç½²
ç®€å•çš„æ¼”ç¤ºéƒ¨ç½²ï¼Œè¯·å‚é˜…`STREAMLIT_DEPLOYMENT_GUIDE.md`

### è¿è¡Œåº”ç”¨ç¨‹åº

```bash
# å¯åŠ¨QueryBotæœåŠ¡
uv run uvicorn backend.sql_assistant.api:app --host 0.0.0.0 --port 8000 --reload

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨å‰ç«¯
cd frontend
uv run streamlit run app.py
```

### é…ç½®é€‰é¡¹

```bash
# åœ¨.envæ–‡ä»¶ä¸­è‡ªå®šä¹‰é…ç½®
vim .env

# ä¸»è¦é…ç½®åŒºåŸŸï¼š
# - æ•°æ®åº“è¿æ¥è®¾ç½®
# - LLM APIå¯†é’¥å’Œç«¯ç‚¹
# - å‘é‡æ•°æ®åº“é…ç½®
# - ç›‘æ§å’Œè¿½è¸ªé€‰é¡¹
```

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®ï¼

### å¦‚ä½•è´¡çŒ®

1. **Forké¡¹ç›®**å¹¶åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. **æäº¤ä»£ç **å¹¶é€šè¿‡æµ‹è¯•
3. **åˆ›å»ºPull Request**å¹¶æè¿°æ›´æ”¹
4. **ä»£ç å®¡æŸ¥**å¹¶åœ¨æ‰¹å‡†ååˆå¹¶åˆ°ä¸»åˆ†æ”¯

### å¼€å‘æ ‡å‡†

- éµå¾ªPEP 8ç¼–ç æ ‡å‡†
- æ·»åŠ å®Œæ•´çš„ç±»å‹æç¤º
- ç¼–å†™å•å…ƒæµ‹è¯•å’Œæ–‡æ¡£
- ä½¿ç”¨æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯

### æŠ¥å‘Šé—®é¢˜

- ä½¿ç”¨GitHub IssuesæŠ¥å‘Šé”™è¯¯
- æä¾›è¯¦ç»†çš„é‡ç°æ­¥éª¤
- åŒ…å«ç³»ç»Ÿç¯å¢ƒä¿¡æ¯
- é™„åŠ ç›¸å…³æ—¥å¿—ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨[MITè®¸å¯è¯](LICENSE)ã€‚

## ğŸ“ è”ç³»æˆ‘ä»¬

- **é¡¹ç›®ä»“åº“**ï¼šhttps://github.com/i-richardwang/QueryBot
- **é—®é¢˜æŠ¥å‘Š**ï¼šhttps://github.com/i-richardwang/QueryBot/issues

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼